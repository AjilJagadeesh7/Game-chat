{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","AuthContext","React","createContext","AuthProvider","children","useState","loading","setLoading","user","setUser","history","useHistory","useEffect","onAuthStateChanged","push","value","Provider","Chats","useContext","handleLogout","a","signOut","getFile","url","fetch","res","blob","data","File","type","axios","get","headers","email","uid","then","catch","formdata","FormData","append","photoURL","avatar","name","post","error","console","log","className","onClick","height","projectID","userName","userSecret","Login","id","signInWithRedirect","GoogleAuthProvider","GoogleOutlined","FacebookAuthProvider","FacebookOutlined","App","style","fontFamily","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3561c2fc.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\nexport const auth  = firebase.initializeApp({\n    apiKey: \"AIzaSyBxnYOMp_eyxSobHlscMjOP7zGeA_NVa5Y\",\n    authDomain: \"g-chat-69a1b.firebaseapp.com\",\n    projectId: \"g-chat-69a1b\",\n    storageBucket: \"g-chat-69a1b.appspot.com\",\n    messagingSenderId: \"486372692988\",\n    appId: \"1:486372692988:web:10c39aed9e9bfb91eb9879\"\n  }).auth();","import React,{ useContext, useState, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { auth } from '../firebase'\n\nconst AuthContext = React.createContext()\n\nexport const useAuth = () => useContext(AuthContext)\n\nexport const AuthProvider = ({ children }) => {\n    const [loading,setLoading] = useState(true)\n    const [user,setUser] = useState(null)\n    const history = useHistory();\n\n    useEffect(()=>{\n        auth.onAuthStateChanged((user)=>{\n            setUser(user)\n            setLoading(false)\n            if(user) history.push('/chats')\n        })\n    },[user,history])\n\n    const value = { user }\n\n    return(\n        <AuthContext.Provider value = {value}>\n            {!loading && children}\n        </AuthContext.Provider>\n    )\n}","import React,{ useRef, useState, useEffect} from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { ChatEngine } from 'react-chat-engine'\nimport { auth } from '../firebase'\n\nimport { useAuth } from '../contexts/AuthContext'\nimport axios from 'axios'\n\nexport default function Chats (){\n\n    const history = useHistory();\n    const { user } = useAuth();\n    const [loading,setLoading] = useState(true)\n\n\n    const handleLogout = async () => {\n        await auth.signOut();\n        history.push('/')\n    }\n\n    const getFile = async (url) => {\n        const res = await fetch(url)\n        const data = await res.blob()\n\n        return new File([data],\"userPhoto.jpg\",{type:'image/jpeg'})\n    }\n\n    useEffect(()=>{\n        if(!user){\n            history.push('/')\n            return\n        }\n\n        axios.get('https://api.chatengine.io/users/me',{\n            headers:{\n                \"project-id\": \"5e55a211-c844-4233-87de-9918765604cc\",\n                \"user-name\":user.email,\n                \"user-secret\":user.uid\n            }\n        })\n        .then(()=>{\n            setLoading(false)\n        })\n        .catch(()=>{\n            let formdata = new FormData()\n            formdata.append('email',user.email)\n            formdata.append('username',user.email)\n            formdata.append('secret',user.uid)\n\n            getFile(user.photoURL)\n                .then((avatar)=>{\n                    formdata.append('avatar',avatar,avatar.name)\n\n                    axios.post('https://api.chatengine.io/users',\n                        formdata,\n                        {headers:{\"private-key\":\"44356a5-b395-42bc-ae1b-31c8c62d430d\" }})\n                    .then(()=>setLoading(false))\n                    .catch((error)=>console.log(error))\n                })\n        })\n    },[user,history])\n\n    if(!user || loading) return 'LOADING....'\n\n\n    return (\n        <div className=\"chats-page\">\n           \n            <div className=\"nav-bar\">\n                <div className=\"logo-tab\">\n                    G-Chat\n                </div>\n                <div onClick={handleLogout} className=\"logout-tab\">\n                    Logout\n                </div>\n            </div>\n\n            <ChatEngine \n                height=\"calc(100vh - 66px)\"\n                projectID= \"5e55a211-c844-4233-87de-9918765604cc\"\n                userName={user.email}\n                userSecret={user.uid}\n            />\n        </div>\n    )\n}\n","import React from 'react'\nimport { GoogleOutlined, FacebookOutlined } from '@ant-design/icons'\nimport \"firebase/app\"\n\nimport { auth } from \"../firebase\";\nimport firebase from 'firebase/app'\n\n\nexport default function Login() {\n    return (\n        <div id='login-page'>\n            <div id=\"login-card\">\n                <h2>Welcome to G-Chat</h2>\n\n                <div \n                    className=\"login-button google\"\n                    onClick={()=>auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}\n                >\n                    <GoogleOutlined />Sign In with Google\n                </div>\n\n                <br /><br />\n                \n                <div \n                    className=\"login-button facebook\"\n                    onClick={()=>auth.signInWithRedirect(new firebase.auth.FacebookAuthProvider())}\n                >\n                    <FacebookOutlined />Sign In with Facebook\n                </div>\n            </div>\n        </div>\n    )\n}\n","import React from \"react\"\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\n\nimport { AuthProvider } from \"../contexts/AuthContext\"\n\nimport Chats from \"./Chats\"\nimport Login from \"./Login\"\n\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Avenir' }}>\n      <Router>\n        <AuthProvider>\n          <Switch>\n            <Route path=\"/chats\" component={Chats} />\n            <Route path=\"/\" component={Login} />\n          </Switch>\n        </AuthProvider>\n      </Router>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}